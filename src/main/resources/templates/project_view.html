<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Project Management Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
        font-family: 'Poppins', sans-serif;
        background: #f4f6f9;
        margin: 0;
        padding: 0;
    }

    /* Sidebar Styles from your example */
    .sidebar { 
        min-height: 100vh; 
        background-color: #fff; 
        border-right: 1px solid #e5e7eb; 
    }
    .sidebar h4 { 
        color: #2563eb; 
        font-weight: 600; 
        margin-bottom: 1.5rem; 
    }
    .sidebar a { 
        display: flex; 
        align-items: center; 
        gap: 0.5rem; 
        color: #1e293b;
        padding: 0.6rem 1rem; 
        border-radius: 0.75rem; 
        text-decoration: none; 
        transition: all 0.3s; 
    }
    .sidebar a:hover, .sidebar a.active { 
        background-color: #f1f5f9; 
        color: #2563eb; 
    }
    .icon { 
        font-size: 1.25rem; 
    }
    .sidebar .collapse a {
        color: #475569;
        padding-left: 1.5rem;
        display: block;
        text-decoration: none;
        border-radius: 0.5rem;
        transition: all 0.3s;
    }
    .sidebar .collapse a:hover {
        background-color: #f8fafc;
        color: #2563eb;
    }

    /* Content */
    .content {
        flex-grow: 1;
        padding: 2rem;
    }

    /* Cards */
    .card {
        border-radius: 1rem;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        border: none;
    }

    /* Tabs */
    .nav-tabs {
        border-bottom: none;
    }
    .nav-tabs .nav-link {
        border: none;
        border-radius: 0.75rem 0.75rem 0 0;
        background: #f8f9fa;
        color: #495057;
        font-weight: 500;
        margin-right: 0.25rem;
        transition: all 0.3s;
    }
    .nav-tabs .nav-link:hover {
        background: #e2e6ea;
        color: #343a40;
    }
    .nav-tabs .nav-link.active {
        background: linear-gradient(135deg, #6610f2, #0d6efd);
        color: #fff;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    /* Accordion */
    .accordion-button {
        border-radius: 0.75rem;
        margin-bottom: 0.5rem;
        background: #f8f9fa;
        font-weight: 500;
        transition: all 0.3s;
        color: #343a40;
    }
    .accordion-button:not(.collapsed) {
        background: #fff;
        color: #6610f2;
        font-weight: 600;
        box-shadow: inset 0 -1px 0 rgba(0,0,0,0.05);
    }
    .accordion-body {
        background: #fff;
        border-radius: 0 0 0.75rem 0.75rem;
        padding: 1rem;
    }

    /* Buttons */
    .btn-primary {
        border-radius: 0.75rem;
        padding: 0.6rem 1.5rem;
        font-weight: 500;
        background: linear-gradient(135deg,#6610f2,#0d6efd);
        border: none;
        transition: all 0.3s;
    }
    .btn-primary:hover {
        background: linear-gradient(135deg,#0d6efd,#6610f2);
    }

    /* Inputs */
    input, select, textarea {
        border-radius: 0.5rem !important;
    }

    /* Read-only styling */
    .read-only-input {
        background-color: #f8f9fa !important;
        border: 1px solid #e9ecef !important;
        color: #495057 !important;
        cursor: not-allowed !important;
    }

    /* Mobile adjustments */
    @media (max-width: 768px) {
        .sidebar {
            position: static;
            width: 100%;
            min-height: auto;
        }
        .content {
            padding: 1rem;
        }
    }
  </style>
</head>
<body>



        <!-- MOBILE TOP BAR WITH MENU + PROFILE -->
      <div class="d-md-none bg-white p-2 shadow-sm w-100 d-flex justify-content-between align-items-center">
    <button class="btn btn-outline-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
                ‚ò∞ Menu
            </button>

            <a href="/" class="btn btn-primary rounded-pill px-3">
                üë§
            </a>
        </div>

        <!-- MOBILE OFFCANVAS SIDEBAR -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileSidebar">
            <div class="offcanvas-header">
                <h4 class="offcanvas-title">Ho Panel</h4>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
            </div>

            <div class="offcanvas-body sidebar p-0">
                <!-- Dashboard -->
                <a th:href="@{/hoo}">
                    <div class="icon">üìä</div><span>Dashboard</span>
                </a>

                <!-- Projects -->
                <a th:href="@{/hoo/projects/list}">
                    <div class="icon">üìÅ</div><span>Projects </span>
                </a>
            </div>
        </div>
<div class="container-fluid">
    <div class="row">
        <!-- DESKTOP SIDEBAR -->
        <nav class="col-md-2 d-none d-md-block sidebar py-4 px-3">
            <h4>Ho Panel</h4>

            <!-- Dashboard -->
            <a th:href="@{/hoo}">
                <div class="icon">üìä</div><span>Dashboard</span>
            </a>

            <!-- Projects -->
           <a th:href="@{/hoo/projects/list}">
                    <div class="icon">üìÅ</div><span>Projects </span>
                </a>
        </nav>

        <!-- MAIN CONTENT -->
        <main class="col-md-10 content">
            <h1 class="mb-4">
                Project Management - 
                <span th:text="${project.projectName}">Project Name</span>
            </h1>
            
            <div class="card p-3 shadow-sm mb-4">
                <!-- Tabs -->
                <ul class="nav nav-tabs" id="projectTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="projects-tab" data-bs-toggle="tab" data-bs-target="#projects" type="button" role="tab" aria-controls="projects" aria-selected="true">Project Details</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="department-tab" data-bs-toggle="tab" data-bs-target="#department" type="button" role="tab" aria-controls="department" aria-selected="false">Department</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="documentation-tab" data-bs-toggle="tab" data-bs-target="#documentation" type="button" role="tab" aria-controls="documentation" aria-selected="false">Documentation</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab" aria-controls="users" aria-selected="false">Users</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="resources-tab" data-bs-toggle="tab" data-bs-target="#resources" type="button" role="tab" aria-controls="resources" aria-selected="false">Resources</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="hosting-tab" data-bs-toggle="tab" data-bs-target="#hosting" type="button" role="tab" aria-controls="hosting" aria-selected="false">Hosting</button>
                    </li>
                </ul>
            </div>

            <div class="tab-content mt-3" id="projectTabsContent">
                <!-- Project Details -->
                <div class="tab-pane fade show active" id="projects" role="tabpanel" aria-labelledby="projects-tab">
                    <div class="card p-4 mb-3">
                        <h2 class="h5 mb-3" style="color:#6610f2;">Project Details</h2>
                        <form>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Project Name</label>
                                    <input type="text" name="projectName" class="form-control read-only-input"
                                           th:value="${project.projectName}" readonly>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Department</label>
                                    <select class="form-select read-only-input" name="departmentId" disabled>
                                        <option th:each="dept : ${departments}"
                                                th:value="${dept.deptId}"
                                                th:selected="${dept.deptId == project.department?.deptId}"
                                                th:text="${dept.deptName}"></option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Project Manager</label>
                                    <select class="form-select read-only-input" name="projectManagerId" disabled>
                                        <option th:each="user : ${users}"
                                                th:value="${user.id}"
                                                th:selected="${project.projectManager != null and user.id == project.projectManager.id}"
                                                th:text="${user.username}"></option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Created By</label>
                                    <select class="form-select read-only-input" name="createdById" disabled>
                                        <option th:each="user : ${users}"
                                                th:value="${user.id}"
                                                th:selected="${project.createdBy != null and user.id == project.createdBy.id}"
                                                th:text="${user.username}"></option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Start Date</label>
                                    <input type="date" name="startDate" class="form-control read-only-input"
                                           th:value="${project.startDate}" readonly>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Status</label>
                                    <select class="form-select read-only-input" name="status.name" disabled>
                                        <option th:value="New" th:selected="${project.status?.name == 'New'}">New</option>
                                        <option th:value="Ongoing" th:selected="${project.status?.name == 'Ongoing'}">Ongoing</option>
                                        <option th:value="Completed" th:selected="${project.status?.name == 'Completed'}">Completed</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Category</label>
                                    <select class="form-select read-only-input" name="categoryId" disabled>
                                        <option value="" disabled>Select Category</option>
                                        <option th:each="cat : ${categories}"
                                                th:value="${cat.categoryId}"
                                                th:text="${cat.categoryName}"
                                                th:selected="${project.category != null and cat.categoryId == project.category.categoryId}">
                                        </option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Priority</label>
                                    <select class="form-select read-only-input" name="priority" disabled>
                                        <option th:value="Low" th:selected="${project.priority == 'Low'}">Low</option>
                                        <option th:value="Medium" th:selected="${project.priority == 'Medium'}">Medium</option>
                                        <option th:value="High" th:selected="${project.priority == 'High'}">High</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Technologies Used</label>
                                    <textarea class="form-control read-only-input" name="technologiesUsed" rows="2"
                                              th:text="${project.technologiesUsed}" readonly></textarea>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-control read-only-input" name="description" rows="3"
                                              th:text="${project.description}" readonly></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Department -->
                <div class="tab-pane fade" id="department" role="tabpanel" aria-labelledby="department-tab">
                    <h2 class="h5">Department</h2>
                    <div class="accordion" id="departmentAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#hooTab">HO</button>
                            </h2>
                            <div id="hooTab" class="accordion-collapse collapse" data-bs-parent="#departmentAccordion">
                                <div class="accordion-body" th:replace="fragments/hoo_departments_fragment :: hooDepartmentsListFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#nodalTab">Nodal Officer</button>
                            </h2>
                            <div id="nodalTab" class="accordion-collapse collapse" data-bs-parent="#departmentAccordion">
                                <div class="accordion-body" th:replace="fragments/nodals_officer_fragment :: nodalsOfficerListFragment"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documentation -->
                <div class="tab-pane fade" id="documentation" role="tabpanel" aria-labelledby="documentation-tab">
                    <h2 class="h5">Documentation</h2>
                    <div class="accordion" id="documentationAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#reqLetterListTab">Request Letters</button>
                            </h2>
                            <div id="reqLetterListTab" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body" th:replace="fragments/request_letters_fragment :: requestLettersFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#proposalListTab">Project Proposals</button>
                            </h2>
                            <div id="proposalListTab" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body" th:replace="fragments/project_proposals_fragment :: projectProposalsFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#acceptanceListTab">Acceptance Letters</button>
                            </h2>
                            <div id="acceptanceListTab" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body" th:replace="fragments/acceptance_letters_fragment :: acceptanceLettersFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#uatListTab">User Acceptance</button>
                            </h2>
                            <div id="uatListTab" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body" th:replace="fragments/uat_letters_fragment :: uatLettersFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#signoffListTab">Project Signoff</button>
                            </h2>
                            <div id="signoffListTab" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body" th:replace="fragments/project_signoffs_fragment :: projectSignoffsFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#projectManualListTab">Manual</button>
                            </h2>
                            <div id="projectManualListTab" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body" th:replace="fragments/project_manuals_fragment :: projectManualsFragment"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users -->
                <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                    <h2 class="h5">Users</h2>
                    <div class="accordion" id="usersAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#hodListTab">NIC HOD</button>
                            </h2>
                            <div id="hodListTab" class="accordion-collapse collapse" data-bs-parent="#usersAccordion">
                                <div class="accordion-body" th:replace="fragments/hod_users_fragment :: hodUsersListFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#aoListTab">NIC AO</button>
                            </h2>
                            <div id="aoListTab" class="accordion-collapse collapse" data-bs-parent="#usersAccordion">
                                <div class="accordion-body" th:replace="fragments/ao_user_fragment :: aoUserFragment"></div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#developersListTab">Developers</button>
                            </h2>
                            <div id="developersListTab" class="accordion-collapse collapse" data-bs-parent="#usersAccordion">
                                <div class="accordion-body" th:replace="fragments/developer_user_fragment :: developerUserFragment"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resources -->
                <div class="tab-pane fade" id="resources" role="tabpanel" aria-labelledby="resources-tab">
                    <h2 class="h5">Resources</h2>
                    <div class="accordion" id="resourcesAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#devicesListTab">Devices</button>
                            </h2>
                            <div id="devicesListTab" class="accordion-collapse collapse" data-bs-parent="#resourcesAccordion">
                                <div class="accordion-body" th:replace="fragments/device_fragment :: deviceListFragment"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hosting -->
                <div class="tab-pane fade" id="hosting" role="tabpanel" aria-labelledby="hosting-tab">
                    <h2 class="h5">Hosting</h2>
                    <div class="accordion" id="hostingAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#hostingListTab">Servers</button>
                            </h2>
                            <div id="hostingListTab" class="accordion-collapse collapse" data-bs-parent="#hostingAccordion">
                                <div class="accordion-body" th:replace="fragments/hostings_fragment :: hostingsListFragment"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>